name: Update Code
on:
  workflow_dispatch:
    inputs:
      link:
        description: 'Link to File'
        required: true

jobs:
  update_code:
    runs-on: ubuntu-latest
    steps:
    - name: Download File
      run: |
        wget -P /tmp/code --recursive --page-requisites --no-parent ${{ github.event.inputs.link }}
    - name: Update Code in Repository
      uses: actions/checkout@v2
      with:
        ref: main # replace with the name of the branch you want to update
    #- name: Remove Old Code
     # run: |
      #  rm -rf ./*
    - name: Copy New Code
      run: |
        cp -r /tmp/code/gabriels-fantabulous-site-23ac8b.webflow.io/* . 
    - name: Set Git user name and email
      run: |
        git config --global user.email "gabe.ungureanu@outlook.com"
        git config --global user.name "Gabriel"
    - name: Add New Code
      run: |
        git status
        git add .
        git commit -m "test2"
        git push origin main 
